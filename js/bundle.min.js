class ContextualNotes{static hideOnScroll=true;static showEndnotesOnClose=false;constructor(){var contextnotes=this;contextnotes.disableHideOnScroll(2);var note=contextnotes.currentNote;if(note){note.opacity=0;window.setTimeout(function(){contextnotes.showNote();note.opacity=1;},500);}
window.addEventListener('hashchange',function(){contextnotes.showNote();},false);window.addEventListener('scroll',function(){if(location.hash.startsWith('#fn:')&&ContextualNotes.hideOnScroll){ContextualNotes.closeNote(contextnotes.currentNote);}});window.addEventListener('touchend',function(event){if(event.target.classList.contains('footnote-ref')){disableHideOnScroll(0.5);event.preventDefault();event.stopPropagation();event.target.click();}});this.observer=new IntersectionObserver(this.endnoteIntersectionCallback);this.endnotes=document.querySelector('.footnotes');if(this.endnotes){this.observer.observe(this.endnotes);}}
disableHideOnScroll(seconds){ContextualNotes.hideOnScroll=false;window.setTimeout(function(){ContextualNotes.hideOnScroll=true;},seconds*1000);}
get currentNote(){if(location.hash.startsWith('#fn:')){return document.getElementById(location.hash.slice(1));}}
showNote(){var note=this.currentNote;if(note){if(this.endnotes.classList.contains('endnotes')){this.endnotes.classList.remove('endnotes');ContextualNotes.showEndnotesOnClose=true;this.disableHideOnScroll(2);}
this.positionContextualNote(note);var backref=note.getElementsByClassName('footnote-backref').item(0);backref.addEventListener('click',ContextualNotes.onNoteClose);}}
static closeNote(note){note=(typeof note!=='undefined')?note:document.getElementById(location.hash.slice(1));if(note){location.hash='#-';var backref=note.getElementsByClassName('footnote-backref').item(0);backref.removeEventListener('click',ContextualNotes.onNoteClose);if(ContextualNotes.showEndnotesOnClose){ContextualNotes.showEndnotes()
ContextualNotes.showEndnotesOnClose=false;}}}
static onNoteClose(event){var note=this.parentNode;if(note.localName!='li'){note=note.parentNode;}
if(location.hash=='#'+note.getAttribute('id')){event.preventDefault();event.stopPropagation();}
ContextualNotes.closeNote(note);}
positionContextualNote(note){let mql=window.matchMedia('(min-width: 415px)');if(!mql.matches){return;}
var backref=note.getElementsByClassName('footnote-backref').item(0);var ref=document.getElementById(backref.getAttribute('href').slice(1));var refLocation=ref.getBoundingClientRect();var noteTop=refLocation.top+refLocation.height+5+'px';note.style.top=refLocation.top+refLocation.height+5+'px';var noteLeft;if(refLocation.left<(note.clientWidth-125)){noteLeft=Math.max(0,refLocation.left+refLocation.width/2-70);note.classList.add('flip');}else{noteLeft=Math.max(0,Math.min(refLocation.left+refLocation.width/2-note.clientWidth+70,window.innerWidth-note.clientWidth));note.classList.remove('flip');}
note.style.left=noteLeft+'px'
note.style.bottom='auto';var noteLocation=note.getBoundingClientRect();if(noteLocation.bottom>document.documentElement.clientHeight){this.disableHideOnScroll(1);var adjustment=noteLocation.bottom-document.documentElement.clientHeight+10;window.scrollBy(0,adjustment);note.style.top=noteLocation.top-adjustment+'px';}}
static showEndnotes(elem){elem=(typeof elem!=='undefined')?elem:document.querySelector('.footnotes');elem.classList.add('endnotes');var notes=elem.getElementsByTagName('li');Array.prototype.forEach.call(notes,function(li){li.removeAttribute('style');li.classList.remove('flip');});}
static hideEndnotes(elem){elem=(typeof elem!=='undefined')?elem:document.querySelector('.footnotes');elem.classList.remove('endnotes');}
endnoteIntersectionCallback(entries,observer){entries.forEach(entry=>{var elem=entry.target;if(entry.isIntersecting){ContextualNotes.showEndnotes(elem);}else{ContextualNotes.hideEndnotes(elem);}})}}
document.addEventListener('DOMContentLoaded',function(){console.debug('context notes initialized')
window.contextnotes=new ContextualNotes();});;document.addEventListener('DOMContentLoaded',function(){var nav=document.querySelector('nav[aria-label=main]')
var scroll=0
function checkScroll(){var scrolled=Math.abs(document.body.getBoundingClientRect().top)
if(scrolled>scroll&&scrolled>40){if(!nav.classList.contains('hidden')){nav.classList.add('hidden')}}
else if(scrolled<scroll&&scroll-scrolled>5){if(nav.classList.contains('hidden')){nav.classList.remove('hidden')}}
scroll=scrolled}
function setHandler(){var mobile=window.matchMedia('(max-width: 768px)')
if(mobile.matches)document.addEventListener('scroll',checkScroll)
else document.removeEventListener('scroll',checkScroll)}
setHandler()
window.addEventListener('resize',setHandler)});document.addEventListener('DOMContentLoaded',function(){var button=document.querySelector('a[href="#features"]')
var features=document.getElementById('features')
if(button)button.addEventListener('click',jumpDown)
function jumpDown(event){event.preventDefault();features.scrollIntoView({behavior:'smooth'})}})